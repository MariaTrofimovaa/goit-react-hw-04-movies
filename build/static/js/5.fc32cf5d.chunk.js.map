{"version":3,"sources":["services/api.js","images/defaultMovie.png","components/moviesList/MovieListStyled.js","components/moviesList/MoviesList.js","helper/parseQueryString.js","pages/moviesPage/MoviesPageStyled.js","pages/moviesPage/MoviesPage.js"],"names":["apiKey","fetchMovies","a","axios","get","response","data","results","console","log","searchMovies","query","fetchMovieDetail","id","fetchMovieCast","cast","fetchMovieReviews","MovieListContainer","styled","ul","withRouter","movies","location","map","movie","className","to","pathname","state","from","src","poster_path","defaultMovie","alt","original_title","title","parseQueryString","queryStr","URLSearchParams","Object","fromEntries","entries","SearchForm","div","MoviesPage","onHandleChange","e","setState","target","value","onHandleSubmit","preventDefault","props","history","push","this","search","currentQuery","then","prevProps","prevState","onSubmit","type","onChange","MoviesList","Component"],"mappings":"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","file":"static/js/5.fc32cf5d.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst apiKey = \"5b4dc2f477ae37de2dcdca88c213c32b\";\r\n\r\n// список самых популярных фильмов на сегодня для создания коллекции на главной странице.\r\nexport const fetchMovies = async () => {\r\n  try {\r\n    const response = await axios.get(\r\n      `https://api.themoviedb.org/3/movie/popular?api_key=${apiKey}&language=en-US&page=1`\r\n    );\r\n    return response.data.results;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\n//  поиск кинофильма по ключевому слову на странице фильмов.\r\nexport const searchMovies = async (query) => {\r\n  try {\r\n    const response = await axios.get(\r\n      `https://api.themoviedb.org/3/search/movie?api_key=${apiKey}&language=en-US&query=${query}&page=1&include_adult=false`\r\n    );\r\n    return response.data.results;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\n// запрос полной информации о фильме для страницы кинофильма.\r\nexport const fetchMovieDetail = async (id) => {\r\n  try {\r\n    const response = await axios.get(\r\n      `https://api.themoviedb.org/3/movie/${id}?api_key=${apiKey}&language=en-US`\r\n    );\r\n    return response.data;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\n// запрос информации о актёрском составе для страницы кинофильма.\r\nexport const fetchMovieCast = async (id) => {\r\n  try {\r\n    const response = await axios.get(\r\n      `https://api.themoviedb.org/3/movie/${id}/credits?api_key=${apiKey}&language=en-US`\r\n    );\r\n    return response.data.cast;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\n// запрос обзоров для страницы кинофильма.\r\nexport const fetchMovieReviews = async (id) => {\r\n  try {\r\n    const response = await axios.get(\r\n      `https://api.themoviedb.org/3/movie/${id}/reviews?api_key=${apiKey}&language=en-US&page=1`\r\n    );\r\n    return response.data.results;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n","export default __webpack_public_path__ + \"static/media/defaultMovie.c4781ca5.png\";","import styled from \"styled-components\";\r\n\r\nexport const MovieListContainer = styled.ul`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-around;\r\n  padding: 40px;\r\n  list-style: none;\r\n\r\n  .listItem {\r\n    margin: 10px;\r\n  }\r\n\r\n  .link {\r\n    text-decoration: none;\r\n  }\r\n\r\n  .listTitle {\r\n    text-align: center;\r\n    padding: 15px;\r\n    text-transform: uppercase;\r\n    font-weight: 700;\r\n    color: black;\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport { MovieListContainer } from \"./MovieListStyled\";\r\nimport defaultMovie from \"../../images/defaultMovie.png\";\r\n\r\nconst MoviesList = ({ movies, location, query }) => {\r\n  return (\r\n    <MovieListContainer>\r\n      {movies &&\r\n        movies.map((movie) => {\r\n          return (\r\n            <li key={movie.id} className=\"listItem\">\r\n              <Link\r\n                to={{\r\n                  pathname: `/movies/${movie.id}`,\r\n                  state: { from: location, query },\r\n                }}\r\n                className=\"link\"\r\n              >\r\n                <img\r\n                  className=\"listImg\"\r\n                  src={\r\n                    movie.poster_path\r\n                      ? `https://image.tmdb.org/t/p/w300${movie.poster_path}`\r\n                      : defaultMovie\r\n                  }\r\n                  alt={movie.original_title || movie.title}\r\n                />\r\n                <p className=\"listTitle\">\r\n                  {movie.original_title || movie.title}\r\n                </p>\r\n              </Link>\r\n            </li>\r\n          );\r\n        })}\r\n    </MovieListContainer>\r\n  );\r\n};\r\n\r\nexport default withRouter(MoviesList);\r\n","const parseQueryString = (query = {}) => {\r\n  const queryStr = new URLSearchParams(query);\r\n  return Object.fromEntries(queryStr.entries());\r\n};\r\n\r\nexport default parseQueryString;\r\n","import styled from \"styled-components\";\r\n\r\nexport const SearchForm = styled.div`\r\n  padding: 40px 40px;\r\n\r\n  form {\r\n    text-align: center;\r\n  }\r\n\r\n  .input {\r\n    width: 300px;\r\n    height: 45px;\r\n    padding: 0 10px;\r\n    margin-right: 10px;\r\n    font-size: 20px;\r\n  }\r\n\r\n  .btn {\r\n    border: none;\r\n    padding: 10px;\r\n    border-radius: 3px;\r\n    background-color: #418cee;\r\n    text-decoration: none;\r\n    text-transform: uppercase;\r\n    font-weight: 700;\r\n    color: white;\r\n    box-shadow: 1px 1px 3px black;\r\n    cursor: pointer;\r\n  }\r\n`;\r\n","import React, { Component } from \"react\";\r\nimport { searchMovies } from \"../../services/api\";\r\nimport parseQueryString from \"../../helper/parseQueryString\";\r\nimport MoviesList from \"../../components/moviesList/MoviesList\";\r\nimport { SearchForm } from \"./MoviesPageStyled\";\r\n\r\nclass MoviesPage extends Component {\r\n  state = {\r\n    query: \"\",\r\n    movies: [],\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (this.props.location.search) {\r\n      const currentQuery = parseQueryString(this.props.location.search).query;\r\n      console.log(currentQuery);\r\n\r\n      searchMovies(currentQuery).then((movies) => {\r\n        this.setState({ movies });\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const query = parseQueryString(prevProps.location.search).query;\r\n    const currentQuery = parseQueryString(this.props.location.search).query;\r\n\r\n    if (query !== currentQuery) {\r\n      searchMovies(this.state.query).then((movies) => {\r\n        this.setState({ movies });\r\n      });\r\n    }\r\n  }\r\n\r\n  onHandleChange = (e) => {\r\n    this.setState({ query: e.target.value });\r\n  };\r\n\r\n  onHandleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const { history } = this.props;\r\n    history.push(`?query=${this.state.query}`);\r\n  };\r\n\r\n  render() {\r\n    const { query, movies } = this.state;\r\n\r\n    return (\r\n      <>\r\n        <SearchForm>\r\n          <form onSubmit={this.onHandleSubmit}>\r\n            <input\r\n              type=\"text\"\r\n              value={query}\r\n              onChange={this.onHandleChange}\r\n              className=\"input\"\r\n            />\r\n            <button type=\"submit\" className=\"btn\">\r\n              Search\r\n            </button>\r\n          </form>\r\n        </SearchForm>\r\n        {movies && <MoviesList movies={movies} query={query} />}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MoviesPage;\r\n"],"sourceRoot":""}